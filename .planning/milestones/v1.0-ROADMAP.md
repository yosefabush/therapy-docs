# Milestone v1.0: AI Insights MVP

**Status:** ✅ SHIPPED 2026-01-24
**Phases:** 1-5
**Total Plans:** 12

## Overview

This milestone delivers AI-powered insight generation for TherapyDocs in two main features: role-specific session summaries (tailored to 10 therapist types) and cross-session patient insights (patterns, progress, risks, gaps). The journey starts with prompt infrastructure, builds session summary capability, exposes it via UI, then creates the patient insight engine and integrates it into the application.

## Phases

### Phase 1: Role-Specific Prompts

**Goal:** 10 therapist-role prompts exist, each tailored to generate summaries that speak the professional language of that role
**Depends on:** Nothing (first phase)
**Plans:** 2 plans

Plans:
- [x] 01-01: Create prompt type, registry, and 10 role-specific prompt files
- [x] 01-02: Integrate prompts with generateSessionSummary() dispatch

**Details:**
Each of 10 therapist roles has a distinct prompt file emphasizing role-specific focus areas (psychiatrist: medication/symptoms; OT: functional progress; social worker: systemic factors). Prompts accept SOAP notes and transcript as input variables with role dispatch mechanism selecting correct prompt based on therapist's role.

**Requirements covered:** SUMM-04

**Completed:** 2026-01-22

---

### Phase 2: Session Summary Generation

**Goal:** AI can generate role-specific session summaries using notes and transcripts as input
**Depends on:** Phase 1
**Plans:** 2 plans

Plans:
- [x] 02-01: Create AI summary engine with mock/real modes
- [x] 02-02: Create API route for summary generation

**Details:**
Calling generateSessionSummary() with a session and role returns an AI-generated summary that incorporates SOAP notes content and transcript content when available. Summary output reflects the role-specific prompt with noticeably different summaries per role. Includes mock mode for development and OpenAI integration for production.

**Requirements covered:** SUMM-01, SUMM-03

**Completed:** 2026-01-22

---

### Phase 3: Session Summary UI

**Goal:** Therapists can generate, review, save, and regenerate AI summaries directly on the session page
**Depends on:** Phase 2
**Plans:** 2 plans

Plans:
- [x] 03-01: Add AISummary type and PATCH endpoint for summary persistence
- [x] 03-02: Create SummaryPanel component and integrate into session page

**Details:**
Session page shows "Generate Summary" button when no summary exists. Generated summary appears above SOAP notes for review before saving. Therapist can approve/save the summary to the session record, which persists across page reloads. Regenerate functionality allows creating fresh versions. Full 5-state machine (empty, generating, preview, saved, error) with Hebrew labels.

**Requirements covered:** SUMM-02, SUMM-05, SUMM-06, SUMM-07

**Completed:** 2026-01-22

---

### Phase 4: Patient Insight Engine

**Goal:** AI can analyze all sessions for a patient and surface patterns, progress trends, risk indicators, and treatment gaps
**Depends on:** Nothing (parallel to Phase 2-3)
**Plans:** 3 plans

Plans:
- [x] 04-01: Create PatientInsights type and session aggregation utilities
- [x] 04-02: Create AI-powered insight generator with prompts for 4 categories
- [x] 04-03: Create API route for patient insight generation

**Details:**
Insight engine fetches and aggregates all sessions for a patient, identifies recurring themes and behaviors (patterns), tracks improvement or decline over time (progress trends), detects risk indicators mentioned across sessions, and identifies treatment gaps (mentioned but unaddressed concerns). Includes bilingual support (Hebrew/English) and confidence scoring.

**Requirements covered:** INSI-02, INSI-03, INSI-04, INSI-05, INSI-06

**Completed:** 2026-01-22

---

### Phase 5: Patient Insight Integration

**Goal:** Therapists can trigger insight generation from patient profile and view results on the AI insights page
**Depends on:** Phase 4
**Plans:** 3 plans

Plans:
- [x] 05-01: Create InsightPanel component and integrate into patient profile
- [x] 05-02: Enhance AI insights page with patient selector and real data
- [x] 05-03: Add persistence layer with GET/PATCH endpoints

**Details:**
Patient profile page shows "Generate Insights" button that triggers AI insight generation for that patient. Generated insights appear on the AI insights page. Insights are saved and persist across sessions with GET-then-POST pattern (checks for saved insights before generating). Therapist can regenerate insights to get updated analysis. Includes InsightPanel with state machine matching SummaryPanel pattern.

**Requirements covered:** INSI-01, INSI-07, INSI-08

**Completed:** 2026-01-23

---

## Milestone Summary

**Key Decisions:**

- Session summaries role-specific, patient insights unified — Session reflects individual therapist's perspective; patient insights provide holistic view for team collaboration
- Regenerate-only (no manual edit) — Keeps AI output consistent, avoids mixed human/AI content issues
- Summary above SOAP on session page — Natural reading flow: AI summary first, then source notes below
- Patient insight trigger from profile, displays on insights page — Generate from patient context, view in centralized insights hub
- Mock/Real AI modes — Development without API costs, production with OpenAI integration
- GET-then-POST pattern — Efficient data fetching with saved insights prioritized
- Bilingual support — Hebrew and English with language-aware AI and RTL layouts

**Issues Resolved:**

- TypeScript casing mismatches on Windows filesystem
- Backward compatibility for existing generateSessionSummary() callers via function overloads
- Session aggregation filtering to completed sessions only
- Confidence scoring implementation with three tiers (high/medium/low)
- Proper state machine transitions for UI components

**Technical Debt Incurred:**

None identified — all code is production-ready with no TODOs, FIXMEs, or placeholders

---

_For current project status, see .planning/ROADMAP.md (will be created fresh for next milestone)_
